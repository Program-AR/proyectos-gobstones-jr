procedure CosecharTodosLosTomates() {
  repeat(9) {
    CosecharTomatesSiHay()
    Mover(Este)
  }
  CosecharTomatesSiHay()
}

procedure CosecharTomatesSiHay() {
  if (hayTomates()) {
    CosecharTomates()
  }
}

function hayTomates() {
  return (hayBolitas(Verde) && hayBolitas(Rojo))
}

procedure CosecharTomates() {
  Sacar(Rojo)
}


program {
  CosecharTodosLosTomates()
}
